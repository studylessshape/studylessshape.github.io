<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.119.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>安卓手机安卓Alist以及配置&nbsp;&ndash;&nbsp;学少何Blog</title><link rel=stylesheet href=/css/core.min.32478a57f52c16ea8d985cfbd2d28edda6d39bfc82a9b118b94caa532c16ce3f1e869e1d49ccce4a74134efed6bdafa0.css integrity=sha384-MkeKV/UsFuqNmFz70tKO3abTm/yCqbEYuUyqUywWzj8ehp4dSczOSnQTTv7Wva+g><meta name=twitter:card content="summary"><meta name=twitter:title content="安卓手机安卓Alist以及配置"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">学少何Blog</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories>归类</a><a class="nav item" href=/tags>标签</a><a class="nav item" href=/about>关于</a><a class="nav item" href=/index%2exml>RSS</a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">安卓手机安卓Alist以及配置</h1><p class="article date">2023年1月4日 1:04</p></section><article class="article markdown-body"><h2 id=前言>前言</h2><p>最近换手机了，旧的手机放着没用，想着拿旧手机的空间搭个私有网盘。由于之前试过可道云，可道云的配置比较麻烦，这次试试 <a href=https://alist.nn.ci/zh/ target=_blank rel="noopener noreferrer">Alist</a> 网盘。</p><p><a href=https://alist.nn.ci/zh/ target=_blank rel="noopener noreferrer">Alist</a> 有这么几个好处：</p><ol><li>安装方便快捷；</li><li>可以配置除本地之外的网盘，如可以添加百度网盘；</li><li>播放视频等可以调用本地播放器，如PC端的PotPlayer，安卓端的MxPlayer；</li><li>无需 root；</li><li>支持WebDav（据说也只支持 WebDav，其实也算是一个缺点）。</li></ol><h2 id=安装-termux>安装 termux</h2><p>termux 现在需要从 f-droid 上下载了，地址为 <a href=https://f-droid.org/zh_Hans/packages/com.termux/ target=_blank rel="noopener noreferrer">https://f-droid.org/zh_Hans/packages/com.termux/</a>。选择最新版下载即可，写此博客时，termux 的最新版本为 0.118.0。termux 本身的文件还是比较大的，可能会下载比较久。
<img src=./1.termux-on-fdroid.jpg alt=termux-on-fdroid></p><p>下载好之后直接安装，能够打开的话，一般来说就没什么问题了，可以进行下一步操作了。</p><h3 id=换源>换源</h3><p>在搜索引擎里搜索 tuna，找到清华大学镜像站，如果进入的是主页，则继续选择开源镜像站。进去后搜索 termux，点击名称旁边的问号，则会进入 termux 换源的帮助页面，链接为 <a href=https://mirrors.tuna.tsinghua.edu.cn/help/termux/ target=_blank rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/help/termux/</a>。复制下图的命令并运行：
<img src=./2.tuna-mirror-command.png alt=tuna-mirror-command></p><p>在回车后，会提示是否继续，输入 y 并回车，会更新源。之后在提示的时候，按下回车，使用默认配置即可。</p><h3 id=安装-vim>安装 vim</h3><p>vim 是 linux 下常用的编辑器，当然也可以选择安装 neovim。</p><p>输入下面的命令安装 vim：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>pkg install vim -y
</span></span></code></pre></div><p>如果安装时非常慢，可能是换源失败，或者是当时的清华镜像源出了问题，可以选择换其他的镜像源。</p><h3 id=安装-ssh可选>安装 ssh（可选）</h3><p>安装 ssh 主要是为了方便电脑对 termux 进行配置，没有此需求的可以无视。</p><p>输入下面指令安装 ssh：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>pkg install openssh -y
</span></span></code></pre></div><p>然后输入下面的指令修改 ssh 的密码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>passwd
</span></span></code></pre></div><p>修改后输入下面的指令启用 ssh：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sshd
</span></span></code></pre></div><p>使用 ifconfig 查看机身的 ip 地址，并使用电脑端的 ssh 应用连接。termux 的 ssh 端口为 8022，登录账户为 root，密码为刚才修改的密码。</p><h2 id=安装质感文件>安装质感文件</h2><p>在酷安上搜索质感文件，或者进入 f-droid 上搜索质感文件，下载并安装。（f-droid的链接为 <a href=https://f-droid.org/packages/me.zhanghai.android.files/ target=_blank rel="noopener noreferrer">https://f-droid.org/packages/me.zhanghai.android.files/</a>）。</p><p>质感文件有两个比较重要的作用，一个是可以直接操作 termux/home 下的文件，另一个作用是查看文件的路径。</p><h2 id=安装-alist>安装 Alist</h2><p>Alist 的安装较为简单。打开 termux，输入下面的指令直接安装：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>pkg install alist -y
</span></span></code></pre></div><p>安装好之后，使用下面的指令查看 admin 的账户和密码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>alist admin
</span></span></code></pre></div><p>输入指令和比较重要的结果如下图所示：
<img src=./3.alist-admin.jpg alt=alist-admin></p><p>在开启 alist 网盘之前，首先使用 ifconfig 查看自己的 ip 地址。
<img src=./4.ifconfig.jpg alt=ifconfig></p><p>然后输入下面的指令开启 alist：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>alist server
</span></span></code></pre></div><h3 id=配置-alist-存储>配置 Alist 存储</h3><p>如果使用当前安装 alist 的手机访问 alist，直接在手机浏览器中输入 <code>127.0.0.1:5244</code> 进行访问。如果使用其他设备的浏览器，则需要输入 <code>[ip]:5244</code> 进行访问，其中 <code>[ip]</code> 为之前 ifconfig 中查看的地址。进入之后，大概率会看到这个界面：
<img src=./5.alist-start-page.png alt=alist-start-page></p><p>点击下面的登录，输入之前的账户和密码。登录成功之后，点击下面的管理，进入管理界面。
<img src=./6.alist-manage-page.png alt=alist-manage-page></p><p>首先将密码修改为自己能够记住的密码，然后点击保存。之后在左侧导航栏点击存储，点击添加存储，驱动选择时，向下划，选择本地存储。
<img src=./7.alist-storage-page.png alt=alist-storage-page></p><p>挂载路径，是我们在进入 alist 网盘时访问的路径，此处按照自己需求填写。本人此处填入了 <code>/</code>，即根路径。往下翻，排序选择<code>名称</code>，提取文件夹选择<code>提取到最前</code>。再往下翻，有一个根文件夹路径，这个路径的设置比较麻烦。</p><p>打开 termux，按左侧并向右滑动，点击 new session，打开一个新的终端。输入 <code>whereis alist</code> 指令查看 alist 的位置：
<img src=./8.whereis-alist.jpg alt=whereis-alist></p><p>由上图可以看到 alist 位于 <code>/data/data/com.termux/files/usr/bin/alist</code>。那么可以知道 termux/home 的位置为 <code>/data/data/com.termux/files/home</code>。那么为了文件较为干净并且方便管理，我们在 termux/home 下为 alist 专门创建一个文件夹。</p><p>先输入指令 cd，然后输入指令 mkdir alist-files，最后输入 ls 查看是否创建成功。
<img src=./9.cd-mkdir-alist-files.jpg alt=cd-mkdir-alist-files></p><p>然后回到浏览器，将位置 <code>/data/data/com.termux/files/home/alist-files</code> 填入根文件夹路径。最后点击添加。没有问题的话，存储界面会多一个存储的条目，回到主页会发现之前的报错已经没有了。
<img src=./10.alist-storage-state.png alt=alist-storage-state>
<img src=./11.alist-home-page.png alt=alist-home-page></p><p>在主页创建几个文件夹，并尝试上传文件来测试是否可用。（此处我尝试创建了三个文件夹，并上传了一个 gif 图。）
<img src=./12.test-alist.png alt=test-alist></p><p>这里将 termux/home 挂载到了 alist 的根目录。接下来将挂载机身文件地址。</p><h3 id=挂载机身地址>挂载机身地址</h3><p>本人不太建议直接将机身挂载到 alist 的根目录，因为这样管理起来会很乱。其实之前的 termux/home 也应该挂载在一个路径中，而不是根路径上。但是直接挂载到根路径使用会很方便，而且 termux/home 中文件的改变并不会影响到机身文件，只会占用存储空间，所以这样操作了。</p><p>打开质感文件，随便选一个文件夹，复制路径。
<img src=./13.copy-android-storage-path.jpg alt=copy-android-storage-path></p><p>然后回到 alist，点击管理，进入存储，点击添加，驱动选择本地存储。这一次，挂载路径填入 <code>/phone</code>。
<img src=./14.alist-storage-phone.png alt=alist-storage-phone></p><p>往下划，排序选择<code>名称</code>，提取文件夹选择<code>提取到最前</code>，这样比较符合使用习惯，当然如果你的使用习惯不太一样可以自行选择。根文件夹路径填入刚才复制的路径，并且删掉最后的文件夹名称。最终如下所示：
<img src=./15.alist-storage-phone-path.png alt=alist-storage-phone-path></p><p>点击保存，如果报错，可能是挂载路径冲突或者根文件夹路径错误。如果还是不能报错或者出错就需要自己排查了。</p><p>进入主页，进入 phone 文件夹，发现无法打开，有如下报错：
<img src=./16.alist-phone-dir-error.png alt=alist-phone-dir-error></p><p>出现这个问题是我们还没有给 termux 存储权限，在手机上，给 termux 存储权限之后，就可以了：
<img src=./17.alist-phone-dir.png alt=alist-phone-dir></p><h2 id=一些问题>一些问题</h2><p>termux 很容易被后台杀掉，需要在电池设置中，将 termux 保持常驻，启用 termux 的各种允许启动或者是关闭 termux 的各种电池优化。总之就是要防止 termux 被杀掉。</p><p>另外建议保持手机的充电状态。这样才能保证 termux，即 alist 能一直运行。所以使用手机作为服务器或者私有网盘，对手机电池的消耗还是比较大的。</p><p>Alist 方面，手机上配置好的 Alist 网盘，在打包下载方面存在着问题，所以如果想批量下载文件可能会不太行。还有就是文件的上传，在手机上使用 Alist 时，只能单个文件上传，不能选择文件夹上传或者选择多个文件上传。除此之外，Alist 并不会显示当前存储空间的情况。</p><p>不过目前来说还不错，能够利用闲置的空间做点有趣的事情。比如上传视频，然后可以通过 MxPlayer 或者 PotPlayer 观看，还挺流畅的。</p><h2 id=题外话>题外话</h2><p>手机上有个开源软件叫阅读，可以在酷安上找到并下载。这个软件可以通过 WebDav 来备份和恢复。这里就简单的说一下 Alist 的 WebDav 怎么使用。</p><p>打开阅读，选择最右边的人物图标，有一个选项叫做备份和恢复。在 WebDav 服务器地址处，输入 <code>[你的 Alist 网盘地址]/dav</code>，WebDav 帐号输入 admin，密码输入设置的密码，如果忘了，可以在 termux 中打开新的终端输入 alist admin 查看密码。（此处我填入的是我使用 alist 管理员添加的一个账户）
<img src=./18.reader-webdav-config.jpg alt=reader-webdav-config></p><p>然后点击备份，备份完成后，点击恢复，查看下是否备份成功。下图中显示了两个备份恢复文件，一个是我刚才备份的，一个是之前的备份。刚才的备份中的设备名称，和配置中显示的设备名称一致，说明 WebDav 的备份配置成功了。之后可以使用 Alist 进行备份和恢复了。
<img src=./19.reader-webdav-recover.jpg alt=reader-webdav-recover></p><p>如果无法备份，那么在 Alist 管理中，选择用户，添加一个拥有 WebDav 权限的账户，并将阅读中的账户改为新添加的账户即可。</p></article><section class="article labels"><a class=category href=/categories/%E7%A7%81%E6%9C%89%E7%BD%91%E7%9B%98%E6%90%AD%E5%BB%BA/>私有网盘搭建</a><a class=tag href=/tags/alist/>Alist</a><a class=tag href=/tags/termux/>Termux</a><a class=tag href=/tags/%E7%A7%81%E6%9C%89%E7%BD%91%E7%9B%98/>私有网盘</a><a class=tag href=/tags/webdav/>WebDav</a></section><section class="article author"><p class=name>学少何</p><div class=bio><em>不求上进的社畜……</em></div><div class=details><a class=item href=https://github.com/studylessshape target=_blank rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;studylessshape</a></div></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/post/rust/change-rustup-and-cargo-location/><span class="iconfont icon-article"></span>修改/移动 rustup 和 cargo 位置</a></p><p><a class=link href=/post/misnotes/passge-collection/><span class="iconfont icon-article"></span>文章、工具收集</a></p></section></div></section><section id=footer><div style=display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-content:center;align-items:center><p style=flex-shrink:0>© 2024 学少何</p><p><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://github.com/cntrump/hugo-notepadium target=_blank>Notepadium</a></p></div></section><script src=/js/hljs.min.6f979583f61e4ec5f0b94f94eab2e130ee628032474d374414dba4e33cc12097a0d01fe65b33378b23f6d3b053b95445.js integrity=sha384-b5eVg/YeTsXwuU+U6rLhMO5igDJHTTdEFNuk4zzBIJeg0B/mWzM3iyP207BTuVRF></script><script>hljs.initHighlightingOnLoad()</script></body></html>