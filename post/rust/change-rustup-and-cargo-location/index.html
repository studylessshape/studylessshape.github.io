<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.147.7"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><meta name=description content="change rustup and cargo location"><title>修改/移动 rustup 和 cargo 位置&nbsp;&ndash;&nbsp;学少何Blog</title><link rel=stylesheet href=/css/core.min.32478a57f52c16ea8d985cfbd2d28edda6d39bfc82a9b118b94caa532c16ce3f1e869e1d49ccce4a74134efed6bdafa0.css integrity=sha384-MkeKV/UsFuqNmFz70tKO3abTm/yCqbEYuUyqUywWzj8ehp4dSczOSnQTTv7Wva+g><meta name=twitter:card content="summary"><meta name=twitter:title content="修改/移动 rustup 和 cargo 位置"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><span class="site name">学少何Blog</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/categories>归类</a><a class="nav item" href=/tags>标签</a><a class="nav item" href=/about>关于</a><a class="nav item" href=/index%2exml>RSS</a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">修改/移动 rustup 和 cargo 位置</h1><p class="article date">2023年2月4日 2:04</p></section><article class="article markdown-body"><h2 id=移动方法>移动方法</h2><p>移动方法按照这篇博客移动即可，博客地址：<a href=https://tian051011.me/archives/7/ target=_blank rel="noopener noreferrer">https://tian051011.me/archives/7/</a>。</p><h2 id=环境变量来源>环境变量来源</h2><p>当然不能够说就这样完了，对于我说，我更想知道到底为什么会是这两个变量。</p><p>在进行 rust 开发的时候，有两个比较重要的工具，一个是 rustup，另一个是 cargo。rustup 中包含了 rust 开发的工具链，而 cargo 则是包管理。如果没有改变位置，那么在原本 C 盘的位置应该分别位于 <code>%USERPROFILE%/.rustup</code> 和 <code>%USERPROFILE%\.cargo</code> 下。<code>%USERPROFILE%</code> 是用户目录，一般来说就是在 C 盘。</p><p>那么对应的两个环境变量可以在 <a href=https://doc.rust-lang.org/cargo/reference/environment-variables.html target=_blank rel="noopener noreferrer">Environment Variables - The Cargo Book</a> 和 <a href=https://rust-lang.github.io/rustup/environment-variables.html target=_blank rel="noopener noreferrer">Environment Variables - The rustup book</a> 中找到。</p><p>原文为：</p><blockquote><p><code>CARGO_HOME</code> — Cargo maintains a local cache of the registry index and of git checkouts of crates. By default these are stored under <code>$HOME/.cargo</code> (<code>%USERPROFILE%\.cargo</code> on Windows), but this variable overrides the location of this directory. Once a crate is cached it is not removed by the clean command. For more details refer to the <a href=https://doc.rust-lang.org/cargo/guide/cargo-home.html target=_blank rel="noopener noreferrer">guide</a>.</p><p><code>RUSTUP_HOME</code> (default: <code>~/.rustup</code> or <code>%USERPROFILE%/.rustup</code>) Sets the root rustup folder, used for storing installed toolchains and configuration options.</p></blockquote><p>可以看到 <code>CARGO_HOME</code> 是 cargo 的包和仓库的位置，cargo 的配置也会存在对应的文件夹下。而 <code>RUSTUP_HOME</code> 则是 rustup 的根目录，存放了工具链和配置（工具链中包含 cargo 和 rustc 等重要的工具）。</p><h2 id=修改时需要注意的地方>修改时需要注意的地方</h2><p>在修改的 <code>CARGO_HOME</code> 之后，对应的位置会直接存入或下载之前 .cargo 文件夹下的内容。建议在修改之后，先不要使用 cargo，而是将原来文件夹下的 config 文件移动到新位置，或者在新位置创建一个 config。这是为了确保镜像不会出错。</p><p>并且在修改之后，也不要将原来的 .cargo 直接删除。这并不是为了将原本的内容复制到新位置，太费时间了，而是为了确保不删掉可执行文件。建议查看一下环境变量。像我这边，cargo 的运行程序就是使用的 .cargo/bin 目录下的 cargo.exe，而不是 .rustup/toolchains/%version%/cargo.exe。所以如果和我情况一样，就将 bin 复制到新目录，并将环境变量做对应的修改。</p><blockquote><p>可以在 Path 中，新建一个位置，内容为 <code>%CARGO_HOME%\bin</code>。注意在修改之后，需要重启控制台或电脑，来确认 cargo 和 rustup 能否运行（rustup 也在 .cargo\bin 中）。</p></blockquote><p>而 <code>RUSTUP_HOME</code> 这边，在修改之后，直接将原文件夹下的内容全复制到新位置就行了。因为除了工具链，其他的是文档和配置文件等内容，不算特别大，复制不需要特别久。也可以选择不复制，将原来的 settings.toml 复制到新位置，然后运行下面的命令补全文件即可。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>rustup default stable
</span></span></code></pre></div><blockquote><p>如果运行 <code>rustup update</code>，可能会提示一些警告，一般来说按照警告操作即可。</p></blockquote></article><section class="article labels"><a class=category href=/categories/rust/>Rust</a><a class=tag href=/tags/rust/>Rust</a></section><section class="article author"><p class=name>学少何</p><div class=bio><em>不求上进的社畜……</em></div><div class=details><a class=item href=https://github.com/studylessshape target=_blank rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;studylessshape</a></div></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/post/rust/actix-web-with-vue/><span class="iconfont icon-article"></span>使用 Actix Web 和 Vue 在开发中遇到的问题</a></p><p><a class=link href=/post/note/alist-install-for-android/><span class="iconfont icon-article"></span>安卓手机安卓Alist以及配置</a></p></section></div></section><section id=footer><div style=display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-content:center;align-items:center><p style=flex-shrink:0>© 2024 学少何</p><p><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://github.com/cntrump/hugo-notepadium target=_blank>Notepadium</a></p></div></section><script src=/js/hljs.min.68c549b01f2c96722917d73ba8d112d8d9bb5f891629166b777f3ff2810da2a2c9bde56eea10013cc86b58b4da4fe858.js integrity=sha384-aMVJsB8slnIpF9c7qNES2Nm7X4kWKRZrd38/8oENoqLJveVu6hABPMhrWLTaT+hY></script><script>hljs.initHighlightingOnLoad()</script></body></html>